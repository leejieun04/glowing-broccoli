<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë‚¨ê¹€ ì—†ì´ ë¨¹ê¸° ì‹íŒ ê²Œì„</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f7f5f0;
      text-align: center;
      padding: 20px;
    }

    #startScreen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 70vh;
      width: 90vw;
      max-width: 900px;
      margin: 0 auto;
      background: #78E150;
      border-radius: 30px;
      box-shadow: 0 8px 20px rgba(0, 128, 0, 0.3);
      padding: 40px 20px;
      color: #fff8e1;
      text-shadow: 1.5px 1.5px 3px rgba(0,0,0,0.25);
      user-select: none;
      animation: fadeIn 1.2s ease forwards;
    }

   /* ì œëª©ê³¼ ë²„íŠ¼ ë¬¶ìŒì„ ë¶„ë¦¬í•´ì„œ ë²„íŠ¼ë“¤ë§Œ ê°€ë¡œ ì •ë ¬ */
#startScreen h1 {
  font-size: 80px;
  margin-bottom: 30px;
}

/* ë²„íŠ¼ë“¤ì„ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆ ì¶”ê°€ */
#buttonContainer {
  display: flex;
  gap: 30px;
}

    #startScreen button {
      font-size: 32px;
      padding: 20px 40px;
      border: 3px solid #4caf50;
      background-color: #4caf50;
      color: white;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      font-weight: 700;
      letter-spacing: 1px;
    }

    #startScreen button:hover {
      background-color: #ffb347;
      border-color: #388e3c;
      box-shadow: 0 10px 25px rgba(255, 179, 71, 0.8);
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    #gameScreen {
      display: none;
    }

    .food-list {
      margin: 20px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }

    .food-btn {
      width: 100px;
      height: 100px;
      font-size: 40px;
      background-color: #ffe08c;
      border: 2px solid #ffa500;
      border-radius: 15px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
      font-weight: bold;
      user-select: none;
    }

    .food-btn:hover {
      background-color: #ffd460;
    }

    .food-btn::after {
      content: attr(data-food);
      font-size: 14px;
      color: #444;
      margin-top: 5px;
      user-select: none;
    }

    #plate {
      margin: 20px auto;
      width: 700px;
      height: 400px;
      background: #fffbe6;
      border: 4px solid #d9b84c;
      border-radius: 30px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: 1.2fr 1.8fr;
      gap: 15px;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
      user-select: none;
    }

    .side-dish-slot, .rice-soup-slot {
      position: relative;
    }

    .side-dish-slot {
      border: 3px dashed #d9a701;
      border-radius: 20px;
      background-color: #fff8d6;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }

    .rice-soup-container {
      grid-column: 1 / 4;
      display: flex;
      gap: 15px;
    }

    .rice-soup-slot {
      flex: 1;
      border: 3px dashed #b4d7b0;
      border-radius: 20px;
      background-color: #e8f6e4;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 50px;
      user-select: none;
    }

    .slot.empty::after {
      content: "ì—¬ê¸°ì— ë‹´ê¸°";
      position: absolute;
      bottom: 8px;
      font-size: 12px;
      color: #999;
      user-select: none;
    }

    .food-item {
      font-size: 80px;
      user-select: none;
      transition: opacity 0.3s ease;
      position: relative;
      z-index: 1;
    }
/* ë°¥ê³¼ êµ­ ì•„ì´ì½˜ë§Œ ë” í¬ê²Œ */
.rice-soup-slot .food-item {
  font-size: 120px; /* ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ ê°€ëŠ¥ */
}

    .eat-tool {
      position: absolute;
      font-size: 70px;
      pointer-events: none;
      user-select: none;
      opacity: 1;
      transition: opacity 0.4s ease;
      z-index: 5;
      left: 50%;
      top: 5%;
      transform: translateX(-50%);
    }

    #message {
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
      min-height: 30px;
      color: #c0392b;
      user-select: none;
    }

    .controls {
      margin-top: 20px;
    }

    .controls button {
      padding: 12px 25px;
      font-size: 20px;
      border-radius: 10px;
      cursor: pointer;
      border: none;
      background-color: #4caf50;
      color: white;
      user-select: none;
    }

    .controls button:hover {
      background-color: #45a049;
    }

    #bigMessage {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 224, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 56px;
      font-weight: 900;
      color: #ff6f61;
      border-radius: 30px;
      user-select: none;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    #bigMessage.show {
      opacity: 1;
      pointer-events: auto;
    }
#howToModal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 300;
}

#howToContent {
  background: #fff;
  padding: 30px;
  border-radius: 20px;
  max-width: 500px;
  text-align: left;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
  color: #333;
  font-size: 18px;
  line-height: 1.6;
}

#howToContent h2 {
  margin-top: 0;
  color: #4caf50;
}

#howToContent button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 18px;
  border: none;
  border-radius: 10px;
  background: #4caf50;
  color: #fff;
  cursor: pointer;
}

  </style>
</head>
<body>

  <div id="startScreen">
  <h1>ğŸ½ ë‚¨ê¹€ ì—†ì´ ë¨¹ì–´ìš”!</h1>
  <div id="buttonContainer">
    <button id="startBtn">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
    <button id="howToBtn">ê²Œì„ ë°©ë²•</button>
  </div>
</div>

  <div id="gameScreen">
    <div class="food-list">
      <button class="food-btn" data-food="ê³ êµ¬ë§ˆ" data-type="side" data-emoji="ğŸ ">ğŸ </button>
      <button class="food-btn" data-food="ìƒëŸ¬ë“œ" data-type="side" data-emoji="ğŸ¥—">ğŸ¥—</button>
      <button class="food-btn" data-food="ë‹­ê³ ê¸°" data-type="side" data-emoji="ğŸ—">ğŸ—</button>
      <button class="food-btn" data-food="ìƒì„ " data-type="side" data-emoji="ğŸŸ">ğŸŸ</button>
      <button class="food-btn" data-food="ë¸Œë¡œì½œë¦¬" data-type="side" data-emoji="ğŸ¥¦">ğŸ¥¦</button>
      <button class="food-btn" data-food="ì‹œê¸ˆì¹˜" data-type="side" data-emoji="ğŸ¥¬">ğŸ¥¬</button>
      <button class="food-btn" data-food="ë°¥" data-type="rice" data-emoji="ğŸš">ğŸš</button>
      <button class="food-btn" data-food="êµ­" data-type="rice" data-emoji="ğŸ²">ğŸ²</button>
    </div>

    <div id="plate">
      <div class="side-dish-slot slot empty" data-slot-type="side"></div>
      <div class="side-dish-slot slot empty" data-slot-type="side"></div>
      <div class="side-dish-slot slot empty" data-slot-type="side"></div>

      <div class="rice-soup-container">
        <div class="rice-soup-slot slot empty" data-slot-type="rice"></div>
        <div class="rice-soup-slot slot empty" data-slot-type="rice"></div>
      </div>

      <div id="bigMessage">ë‹¤ ë¨¹ì—ˆì–´ìš”~!</div>
    </div>

    <div id="message"></div>
    <div class="controls">
      <button id="leftoverBtn">ë‚¨ê²¼ì–´ìš”</button>
      <button id="resetBtn">ë‹¤ì‹œí•˜ê¸°</button>
    </div>
  </div>

  <audio id="biteSound" src="https://actions.google.com/sounds/v1/human_voices/chewing_chips.ogg" preload="auto"></audio>
  <audio id="successSound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_cowbell.ogg" preload="auto"></audio>
  <audio id="errorSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>




<div id="howToModal" style="display: none;">
  <div id="howToContent">
    <h2>ê²Œì„ ë°©ë²•</h2>
    <p>
      1. ë‹¤ì–‘í•œ ë°˜ì°¬ê³¼ ë°¥, êµ­ì„ ì‹íŒì— í´ë¦­í•˜ì—¬ ë‹´ìœ¼ì„¸ìš”.<br>
      2. ë‹´ì€ ìŒì‹ì€ í´ë¦­í•˜ë©´ í•œ ì…ì”© ë¨¹ì„ ìˆ˜ ìˆì–´ìš”.<br>
      3. ëª¨ë“  ìŒì‹ì„ ë‹¤ ë¨¹ìœ¼ë©´ "ë‹¤ ë¨¹ì—ˆì–´ìš”~!" ë©”ì‹œì§€ê°€ ë‚˜ì™€ìš”.<br>
      4. "ë‚¨ê²¼ì–´ìš”" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹íŒì´ ì´ˆê¸°í™”ë¼ìš”.<br>
      5. "ë‹¤ì‹œí•˜ê¸°" ë²„íŠ¼ìœ¼ë¡œ ìƒˆë¡œ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”.<br>
      6. ë°¥ê³¼ ë°˜ì°¬ì„ ë‹¤ ë¨¹ì–´ í™˜ê²½ì„ ì§€ì¼œìš”~!
    </p>
    <button id="closeHowTo">ë‹«ê¸°</button>
  </div>
</div>

  <script>
    const startScreen = document.getElementById('startScreen');
    const gameScreen = document.getElementById('gameScreen');
    const startBtn = document.getElementById('startBtn');
    const buttons = document.querySelectorAll('.food-btn');
    const sideDishSlots = Array.from(document.querySelectorAll('.side-dish-slot'));
    const riceSoupSlots = Array.from(document.querySelectorAll('.rice-soup-slot'));
    const message = document.getElementById('message');
    const bigMessage = document.getElementById('bigMessage');
    const leftoverBtn = document.getElementById('leftoverBtn');
    const resetBtn = document.getElementById('resetBtn');
    const biteSound = document.getElementById('biteSound');
    const successSound = document.getElementById('successSound');
    const errorSound = document.getElementById('errorSound');

    const maxBites = 2;
    const slotBites = new Map();

    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none';
      gameScreen.style.display = 'block';
    });

    // ìŒì‹ ë‹´ê¸° í•¨ìˆ˜
    function addFoodToSlot(foodEmoji, foodType) {
      let targetSlots = foodType === 'side' ? sideDishSlots : riceSoupSlots;

      // ë¹ˆ ìŠ¬ë¡¯ ì°¾ê¸°
      const emptySlot = targetSlots.find(slot => slot.classList.contains('empty'));
      if (!emptySlot) {
        message.textContent = `ë” ì´ìƒ ë‹´ì„ ê³µê°„ì´ ì—†ì–´ìš”!`;
        errorSound.play();
        return false;
      }

      // ìŒì‹ ì¶”ê°€
      const foodSpan = document.createElement('span');
      foodSpan.classList.add('food-item');
      foodSpan.textContent = foodEmoji;
      emptySlot.appendChild(foodSpan);

      emptySlot.classList.remove('empty');
      slotBites.set(emptySlot, maxBites);
      message.textContent = '';
      return true;
    }

    // ìŒì‹ ë‹´ê¸° ë²„íŠ¼ í´ë¦­
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const emoji = btn.dataset.emoji;
        const type = btn.dataset.type;
        addFoodToSlot(emoji, type);
      });
    });

    // ë¨¹ëŠ” ì• ë‹ˆë©”ì´ì…˜ íˆ´ ìƒì„± ë° í‘œì‹œ
    function showEatTool(slot, foodType) {
      const eatTool = document.createElement('span');
      eatTool.classList.add('eat-tool');
      eatTool.textContent = foodType === 'side' ? 'ğŸ¥¢' : 'ğŸ¥„';
      slot.appendChild(eatTool);

      // 0.6ì´ˆ í›„ì— ì²œì²œíˆ ì‚¬ë¼ì§€ê¸°
      setTimeout(() => {
        eatTool.style.opacity = '0';
        setTimeout(() => {
          if (slot.contains(eatTool)) {
            slot.removeChild(eatTool);
          }
        }, 400);
      }, 600);
    }

    // ìŒì‹ ë¨¹ê¸° (í´ë¦­ ì‹œ)
    function eatFood(slot) {
      if (slot.classList.contains('empty')) return;

      let bitesLeft = slotBites.get(slot);
      if (!bitesLeft) return;

      showEatTool(slot, slot.dataset.slotType);
      biteSound.currentTime = 0;
      biteSound.play();

      bitesLeft--;
      slotBites.set(slot, bitesLeft);

      // ìŒì‹ ì ì  ì‚¬ë¼ì§€ê²Œ, ì‘ì•„ì§€ê²Œ
      const foodItem = slot.querySelector('.food-item');
      if (!foodItem) return;

      if (bitesLeft <= 0) {
        foodItem.style.opacity = '0';
        foodItem.style.transform = 'scale(0.5) translateY(-20px)';
        setTimeout(() => {
          if (slot.contains(foodItem)) {
            slot.removeChild(foodItem);
            slot.classList.add('empty');
            slotBites.delete(slot);
            checkAllEaten();
          }
        }, 300);
      } else {
        // ì¤‘ê°„ í•œ ì… ë¨¹ì—ˆì„ ë•Œ ì¡°ê¸ˆ íˆ¬ëª…í•´ì§€ê³  í¬ê¸° ì¤„ì„
        foodItem.style.opacity = '0.5';
        foodItem.style.transform = 'scale(0.8) translateY(-10px)';
        setTimeout(() => {
        }, 500);
      }
    }

    // ìŒì‹ì¹¸ í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ (ë™ì  ìƒì„± ê³ ë ¤)
    function setupSlotClick(slot) {
      slot.addEventListener('click', () => {
        eatFood(slot);
      });
    }

    sideDishSlots.forEach(setupSlotClick);
    riceSoupSlots.forEach(setupSlotClick);

    // ëª¨ë“  ìŒì‹ ë‹¤ ë¨¹ì—ˆëŠ”ì§€ ê²€ì‚¬
    function checkAllEaten() {
      const anyFoodLeft = [...sideDishSlots, ...riceSoupSlots].some(slot => !slot.classList.contains('empty'));
      if (!anyFoodLeft) {
        bigMessage.classList.add('show');
        successSound.play();
        message.textContent = '';
      }
    }

    // ë‚¨ê²¼ì–´ìš” ë²„íŠ¼ - ìŒì‹ ëª¨ë‘ ì œê±°, ë©”ì‹œì§€ ì¶œë ¥
    leftoverBtn.addEventListener('click', () => {
      [...sideDishSlots, ...riceSoupSlots].forEach(slot => {
        slot.innerHTML = '';
        slot.classList.add('empty');
      });
      slotBites.clear();
      bigMessage.textContent = 'ë‹¤ìŒì—ëŠ” ê¼­ ë‹¤ ë¨¹ì–´ìš”~!';
      bigMessage.classList.add('show');
      message.textContent = '';
      errorSound.play();
    });

    // ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼
    resetBtn.addEventListener('click', () => {
      [...sideDishSlots, ...riceSoupSlots].forEach(slot => {
        slot.innerHTML = '';
        slot.classList.add('empty');
      });
      slotBites.clear();
      bigMessage.classList.remove('show');
      message.textContent = '';
    });
    // ê²Œì„ ë°©ë²• ëª¨ë‹¬ ì—´ê³  ë‹«ê¸°
    const howToBtn = document.getElementById('howToBtn');
    const howToModal = document.getElementById('howToModal');
    const closeHowTo = document.getElementById('closeHowTo');

    howToBtn.addEventListener('click', () => {
      howToModal.style.display = 'flex';
    });

    closeHowTo.addEventListener('click', () => {
      howToModal.style.display = 'none';
    });


  </script>
</body>
</html>
